{% block content %}
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->
<script
  src="https://code.jquery.com/jquery-3.5.0.js"
  integrity="sha256-r/AaFHrszJtwpe+tHyNi/XCfMxYpbsRg2Uqn0x3s2zc="
  crossorigin="anonymous">
</script>

<!-- Style for modal -->
<style>
  body{
    margin: 0px;
  }
  .tr:hover{
    background-color: red;
  }
  .navbar{
    padding: 10px;
    height:30px;
    background-color: rgb(237, 231, 246);
    justify-content: space-between;
    display: flex;
    align-items: center;
    box-shadow: 0px 10px 10px rgba(237, 231, 246, .9);
    margin-bottom: 10px;
  }
  .image{
    height: 50px;
    width: 50px;
    background-color: red;
    backgroung-image: url('https://img.icons8.com/bubbles/2x/admin-settings-male.png');
  }
  .modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  }

  /* Modal Content/Box */
  .modal-content {
    background-color: #fefefe;
    margin: 15% auto; /* 15% from the top and centered */
    padding: 20px;
    border: 1px solid #888;
    width: 80%; /* Could be more or less, depending on screen size */
  }

  /* The Close Button */
  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }

</style>

<div class='navbar'>
  <div style='display:flex; align-items: center'>
    <div class='image' style='margin-right: 20px'></div>
    <h3>Welcome, {{request.user}}</h3>
  </div>
<a href="{% url 'logout' %}" class='logout-btn'>Logout</a>
</div>


<!-- --------------------- -->

<!-- The modal -->

<div id="detailsModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <p>Some text in the Modal..</p>
  </div>

</div>

<!-- ------------ -->


<!-- wysiwyg text editor -->




<!-- ---------------- -->


<!-- Filter select options and button -->

<!-- <select class="form-control" id='filter'>
  <option selected='selected'>All</option>
  {% for mdepartment in department %}
    <option>{{mdepartment.department_name}}</option>
  {%endfor%}
</select>
<button class="btn btn-dark" id='filterbtn'>Filter</button> -->

<!-- ------------------- -->






<table class="table table-borderless">
  <tr>
    <th>Name</th>
    <th>Department</th>
    <th colspan="2">Action </th>

  </tr>
  {% for mstudent in students %}
    <tr class='tr' id='{{ mstudent.id }}'>
      <td>{{mstudent}}</td>
      <td>{{mstudent.department.department_name}}</td>
      <td><button class='btn btn-primary viewButton'>View</button>
          <button class='btn btn-primary generateButton'>Generate</button></td>
    </tr>
  {% endfor %}
</table>


<script>
  const modal = $('#detailsModal')

  $('.close').click(function(e){
      modal.css('display', 'none');
  })

  $('.viewButton').click(function(e){
      id=$(this).parent().parent().attr('id');
      id=parseInt(id)
      $.ajax({
        url: 'generate/',
        type: 'GET',
        data: {
          'id': id,
        },
        dataType: 'json',
        success: function (res) {
          modal.css('display','block')
          $('.modal-content > p').text(res.name)
        }
      })

  })


  $('.generateButton').click(function (e) {
    id = $(this).prev().parent().parent().attr('id');
    id=parseInt(id)
    $.ajax({
      url: 'generate/',
      type: 'GET',
      data: {
        'id': id,
      },
      dataType: 'json',
      success: function (res) {
        modal.css('display','block')
        $('.modal-content > p').text(res.name)
      }
    })
  })
</script>



{% endblock %}
